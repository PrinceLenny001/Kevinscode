(self.webpackChunknextjs_template=self.webpackChunknextjs_template||[]).push([[7808],{"./src/stories/LadderLogicEditor.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Initial:()=>Initial,WithContent:()=>WithContent,WithSaveHandler:()=>WithSaveHandler,__namedExportsOrder:()=>__namedExportsOrder,default:()=>LadderLogicEditor_stories});var jsx_runtime=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),react=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),save=__webpack_require__("./node_modules/lucide-react/dist/esm/icons/save.js"),editor_main=__webpack_require__("./node_modules/monaco-editor/esm/vs/editor/editor.main.js");var dynamic=__webpack_require__("./node_modules/next/dynamic.js");const DynamicEditor=__webpack_require__.n(dynamic)()((()=>__webpack_require__.e(165).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@monaco-editor/react/dist/index.mjs"))),{loadableGenerated:{webpack:()=>["./node_modules/@monaco-editor/react/dist/index.mjs"]},ssr:!1});var console=__webpack_require__("./node_modules/console-browserify/index.js");const LadderLogicEditor=({initialValue={rungs:[]},onSave})=>{const[value,setValue]=(0,react.useState)(initialValue),[isEditing,setIsEditing]=(0,react.useState)(!1);(0,react.useEffect)((()=>{editor_main.eo.register({id:"ladderLogic"}),editor_main.eo.setMonarchTokensProvider("ladderLogic",{defaultToken:"invalid",ignoreCase:!1,tokenizer:{root:[[/XIC|XIO|OTE|OTL|OTU|TON|TOF|CTU|CTD|CMP|EQU|GRT|LES|MOV|ADD|SUB|MUL|DIV/,"instruction"],[/[a-zA-Z_][a-zA-Z0-9_]*/,"tag"],[/\d+/,"number"],[/\/\/.*$/,"comment"],[/[\(\)]/,"delimiter"],[/,/,"delimiter"]]}}),editor_main.eo.setLanguageConfiguration("ladderLogic",{brackets:[["(",")"]],autoClosingPairs:[{open:"(",close:")"}],surroundingPairs:[{open:"(",close:")"}],comments:{lineComment:"//"}}),editor_main.EN.defineTheme("ladderLogic",{base:"vs-dark",inherit:!0,rules:[{token:"instruction",foreground:"569CD6",fontStyle:"bold"},{token:"tag",foreground:"9CDCFE"},{token:"number",foreground:"B5CEA8"},{token:"comment",foreground:"6A9955",fontStyle:"italic"},{token:"delimiter",foreground:"D4D4D4"},{token:"invalid",foreground:"FF0000"}],colors:{"editor.background":"#1E1E1E","editor.foreground":"#D4D4D4","editor.lineHighlightBackground":"#2D2D2D","editorCursor.foreground":"#D4D4D4","editor.selectionBackground":"#264F78"}})}),[]);const ladderLogicToText=(0,react.useCallback)((ladderLogic=>ladderLogic.rungs.map((rung=>`${rung.elements.map((element=>{const params=element.parameters?`(${element.parameters.join(",")})`:"";return`${element.type}(${element.tag}${params})`})).join("")}${rung.comment?` // ${rung.comment}`:""}`)).join("\n")),[]),textToLadderLogic=(0,react.useCallback)((text=>({rungs:text.split("\n").map(((line,index)=>{const[code,comment]=line.split("//").map((part=>part.trim())),elementRegex=/([A-Z]+)\(([^)]+)\)/g,elements=[];let match,col=0;for(;null!==(match=elementRegex.exec(code));){const[,type,tagAndParams]=match,[tag,...params]=tagAndParams.split(",").map((s=>s.trim()));elements.push({type,tag,position:{row:0,col:col++},...params.length>0?{parameters:params}:{}})}return{number:index+1,elements,...comment?{comment}:{}}}))})),[]),handleEditorChange=(0,react.useCallback)((newValue=>{if(void 0!==newValue)try{const newLadderLogic=textToLadderLogic(newValue);setValue(newLadderLogic),setIsEditing(!0)}catch(error){console.error("Failed to parse ladder logic:",error)}}),[textToLadderLogic]),handleSave=(0,react.useCallback)((()=>{null==onSave||onSave(value),setIsEditing(!1)}),[onSave,value]);return(0,jsx_runtime.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,jsx_runtime.jsxs)("div",{className:"flex justify-between items-center",children:[(0,jsx_runtime.jsx)("h3",{className:"text-lg font-semibold",children:"Ladder Logic Editor"}),isEditing&&(0,jsx_runtime.jsxs)("button",{onClick:handleSave,className:"flex items-center gap-2 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:[(0,jsx_runtime.jsx)(save.A,{className:"w-4 h-4"}),"Save Changes"]})]}),(0,jsx_runtime.jsx)("div",{className:"h-[500px] border rounded-lg overflow-hidden",children:(0,jsx_runtime.jsx)(DynamicEditor,{height:"100%",defaultLanguage:"ladderLogic",theme:"ladderLogic",value:ladderLogicToText(value),onChange:handleEditorChange,options:{minimap:{enabled:!1},lineNumbers:"on",scrollBeyondLastLine:!1,wordWrap:"on",automaticLayout:!0,renderWhitespace:"all",formatOnPaste:!0,formatOnType:!0}})})]})};LadderLogicEditor.__docgenInfo={description:"",methods:[],displayName:"LadderLogicEditor",props:{initialValue:{required:!1,tsType:{name:"ACDLadderLogic"},description:"",defaultValue:{value:"{ rungs: [] }",computed:!1}},onSave:{required:!1,tsType:{name:"signature",type:"function",raw:"(value: ACDLadderLogic) => void",signature:{arguments:[{type:{name:"ACDLadderLogic"},name:"value"}],return:{name:"void"}}},description:""}}};var LadderLogicEditor_stories_console=__webpack_require__("./node_modules/console-browserify/index.js");const LadderLogicEditor_stories={title:"Components/LadderLogicEditor",component:LadderLogicEditor,parameters:{layout:"centered"},tags:["autodocs"]},sampleLadderLogic={rungs:[{number:1,elements:[{type:"XIC",tag:"Start_PB",position:{row:0,col:0}},{type:"OTE",tag:"Motor_Run",position:{row:0,col:1}}],comment:"Motor start circuit"},{number:2,elements:[{type:"XIC",tag:"Motor_Run",position:{row:0,col:0}},{type:"XIC",tag:"OverTemp",position:{row:0,col:1}},{type:"OTE",tag:"Motor_Fault",position:{row:0,col:2}}],comment:"Motor fault detection"},{number:3,elements:[{type:"XIC",tag:"Reset_PB",position:{row:0,col:0}},{type:"XIO",tag:"OverTemp",position:{row:0,col:1}},{type:"OTU",tag:"Motor_Fault",position:{row:0,col:2}}],comment:"Fault reset circuit"}]},Initial={args:{}},WithContent={args:{initialValue:sampleLadderLogic}},WithSaveHandler={args:{initialValue:sampleLadderLogic,onSave:value=>{LadderLogicEditor_stories_console.log("Saved value:",value)}}},__namedExportsOrder=["Initial","WithContent","WithSaveHandler"];Initial.parameters={...Initial.parameters,docs:{...Initial.parameters?.docs,source:{originalSource:"{\n  args: {}\n}",...Initial.parameters?.docs?.source}}},WithContent.parameters={...WithContent.parameters,docs:{...WithContent.parameters?.docs,source:{originalSource:"{\n  args: {\n    initialValue: sampleLadderLogic\n  }\n}",...WithContent.parameters?.docs?.source}}},WithSaveHandler.parameters={...WithSaveHandler.parameters,docs:{...WithSaveHandler.parameters?.docs,source:{originalSource:"{\n  args: {\n    initialValue: sampleLadderLogic,\n    onSave: value => {\n      console.log('Saved value:', value);\n    }\n  }\n}",...WithSaveHandler.parameters?.docs?.source}}}},"./node_modules/monaco-editor/esm/vs/base/common/worker lazy recursive ^.*$":(module,__unused_webpack_exports,__webpack_require__)=>{var map={"./simpleWorker":"./node_modules/monaco-editor/esm/vs/base/common/worker/simpleWorker.js","./simpleWorker.js":"./node_modules/monaco-editor/esm/vs/base/common/worker/simpleWorker.js"};function webpackAsyncContext(req){return Promise.resolve().then((()=>{if(!__webpack_require__.o(map,req)){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}return __webpack_require__(map[req])}))}webpackAsyncContext.keys=()=>Object.keys(map),webpackAsyncContext.id="./node_modules/monaco-editor/esm/vs/base/common/worker lazy recursive ^.*$",module.exports=webpackAsyncContext},"./node_modules/monaco-editor/esm/vs/editor/common/services lazy recursive ^.*$":(module,__unused_webpack_exports,__webpack_require__)=>{var map={"./editorBaseApi":["./node_modules/monaco-editor/esm/vs/editor/common/services/editorBaseApi.js"],"./editorBaseApi.js":["./node_modules/monaco-editor/esm/vs/editor/common/services/editorBaseApi.js"],"./editorSimpleWorker":["./node_modules/monaco-editor/esm/vs/editor/common/services/editorSimpleWorker.js"],"./editorSimpleWorker.js":["./node_modules/monaco-editor/esm/vs/editor/common/services/editorSimpleWorker.js"],"./editorWorker":["./node_modules/monaco-editor/esm/vs/editor/common/services/editorWorker.js"],"./editorWorker.js":["./node_modules/monaco-editor/esm/vs/editor/common/services/editorWorker.js"],"./editorWorkerHost":["./node_modules/monaco-editor/esm/vs/editor/common/services/editorWorkerHost.js"],"./editorWorkerHost.js":["./node_modules/monaco-editor/esm/vs/editor/common/services/editorWorkerHost.js"],"./findSectionHeaders":["./node_modules/monaco-editor/esm/vs/editor/common/services/findSectionHeaders.js"],"./findSectionHeaders.js":["./node_modules/monaco-editor/esm/vs/editor/common/services/findSectionHeaders.js"],"./getIconClasses":["./node_modules/monaco-editor/esm/vs/editor/common/services/getIconClasses.js"],"./getIconClasses.js":["./node_modules/monaco-editor/esm/vs/editor/common/services/getIconClasses.js"],"./languageFeatureDebounce":["./node_modules/monaco-editor/esm/vs/editor/common/services/languageFeatureDebounce.js"],"./languageFeatureDebounce.js":["./node_modules/monaco-editor/esm/vs/editor/common/services/languageFeatureDebounce.js"],"./languageFeatures":["./node_modules/monaco-editor/esm/vs/editor/common/services/languageFeatures.js"],"./languageFeatures.js":["./node_modules/monaco-editor/esm/vs/editor/common/services/languageFeatures.js"],"./languageFeaturesService":["./node_modules/monaco-editor/esm/vs/editor/common/services/languageFeaturesService.js"],"./languageFeaturesService.js":["./node_modules/monaco-editor/esm/vs/editor/common/services/languageFeaturesService.js"],"./languageService":["./node_modules/monaco-editor/esm/vs/editor/common/services/languageService.js"],"./languageService.js":["./node_modules/monaco-editor/esm/vs/editor/common/services/languageService.js"],"./languagesAssociations":["./node_modules/monaco-editor/esm/vs/editor/common/services/languagesAssociations.js"],"./languagesAssociations.js":["./node_modules/monaco-editor/esm/vs/editor/common/services/languagesAssociations.js"],"./languagesRegistry":["./node_modules/monaco-editor/esm/vs/editor/common/services/languagesRegistry.js"],"./languagesRegistry.js":["./node_modules/monaco-editor/esm/vs/editor/common/services/languagesRegistry.js"],"./markerDecorations":["./node_modules/monaco-editor/esm/vs/editor/common/services/markerDecorations.js"],"./markerDecorations.js":["./node_modules/monaco-editor/esm/vs/editor/common/services/markerDecorations.js"],"./markerDecorationsService":["./node_modules/monaco-editor/esm/vs/editor/common/services/markerDecorationsService.js"],"./markerDecorationsService.js":["./node_modules/monaco-editor/esm/vs/editor/common/services/markerDecorationsService.js"],"./model":["./node_modules/monaco-editor/esm/vs/editor/common/services/model.js"],"./model.js":["./node_modules/monaco-editor/esm/vs/editor/common/services/model.js"],"./modelService":["./node_modules/monaco-editor/esm/vs/editor/common/services/modelService.js"],"./modelService.js":["./node_modules/monaco-editor/esm/vs/editor/common/services/modelService.js"],"./resolverService":["./node_modules/monaco-editor/esm/vs/editor/common/services/resolverService.js"],"./resolverService.js":["./node_modules/monaco-editor/esm/vs/editor/common/services/resolverService.js"],"./semanticTokensDto":["./node_modules/monaco-editor/esm/vs/editor/common/services/semanticTokensDto.js"],"./semanticTokensDto.js":["./node_modules/monaco-editor/esm/vs/editor/common/services/semanticTokensDto.js"],"./semanticTokensProviderStyling":["./node_modules/monaco-editor/esm/vs/editor/common/services/semanticTokensProviderStyling.js"],"./semanticTokensProviderStyling.js":["./node_modules/monaco-editor/esm/vs/editor/common/services/semanticTokensProviderStyling.js"],"./semanticTokensStyling":["./node_modules/monaco-editor/esm/vs/editor/common/services/semanticTokensStyling.js"],"./semanticTokensStyling.js":["./node_modules/monaco-editor/esm/vs/editor/common/services/semanticTokensStyling.js"],"./semanticTokensStylingService":["./node_modules/monaco-editor/esm/vs/editor/common/services/semanticTokensStylingService.js"],"./semanticTokensStylingService.js":["./node_modules/monaco-editor/esm/vs/editor/common/services/semanticTokensStylingService.js"],"./textModelSync/textModelSync.impl":["./node_modules/monaco-editor/esm/vs/editor/common/services/textModelSync/textModelSync.impl.js"],"./textModelSync/textModelSync.impl.js":["./node_modules/monaco-editor/esm/vs/editor/common/services/textModelSync/textModelSync.impl.js"],"./textModelSync/textModelSync.protocol":["./node_modules/monaco-editor/esm/vs/editor/common/services/textModelSync/textModelSync.protocol.js",5628],"./textModelSync/textModelSync.protocol.js":["./node_modules/monaco-editor/esm/vs/editor/common/services/textModelSync/textModelSync.protocol.js",5628],"./textResourceConfiguration":["./node_modules/monaco-editor/esm/vs/editor/common/services/textResourceConfiguration.js"],"./textResourceConfiguration.js":["./node_modules/monaco-editor/esm/vs/editor/common/services/textResourceConfiguration.js"],"./treeSitterParserService":["./node_modules/monaco-editor/esm/vs/editor/common/services/treeSitterParserService.js"],"./treeSitterParserService.js":["./node_modules/monaco-editor/esm/vs/editor/common/services/treeSitterParserService.js"],"./treeViewsDnd":["./node_modules/monaco-editor/esm/vs/editor/common/services/treeViewsDnd.js"],"./treeViewsDnd.js":["./node_modules/monaco-editor/esm/vs/editor/common/services/treeViewsDnd.js"],"./treeViewsDndService":["./node_modules/monaco-editor/esm/vs/editor/common/services/treeViewsDndService.js"],"./treeViewsDndService.js":["./node_modules/monaco-editor/esm/vs/editor/common/services/treeViewsDndService.js"],"./unicodeTextModelHighlighter":["./node_modules/monaco-editor/esm/vs/editor/common/services/unicodeTextModelHighlighter.js"],"./unicodeTextModelHighlighter.js":["./node_modules/monaco-editor/esm/vs/editor/common/services/unicodeTextModelHighlighter.js"]};function webpackAsyncContext(req){if(!__webpack_require__.o(map,req))return Promise.resolve().then((()=>{var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}));var ids=map[req],id=ids[0];return Promise.all(ids.slice(1).map(__webpack_require__.e)).then((()=>__webpack_require__(id)))}webpackAsyncContext.keys=()=>Object.keys(map),webpackAsyncContext.id="./node_modules/monaco-editor/esm/vs/editor/common/services lazy recursive ^.*$",module.exports=webpackAsyncContext}}]);